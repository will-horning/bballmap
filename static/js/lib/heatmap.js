// Generated by CoffeeScript 1.7.1
(function() {
  $(document).ready(function() {
    var choose_player, games, get_players, sd, selected_player_list, td, unselected_player_list, update_heatmap_img;
    sd = 2.5;
    games = [];
    unselected_player_list = [];
    selected_player_list = [];
    td = [];
    $("img.loading").hide();
    get_players = function() {
      if ($("#teamselect option:selected").val() !== "None") {
        return $.getJSON("get_players", {
          "team_id": $("#teamselect option:selected").val()
        }, function(data) {
          var player, _i, _len, _ref;
          $("#playerselect").html('<option value="None"> Choose a player: </option>');
          _ref = data['players'];
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            player = _ref[_i];
            $("#playerselect").append('<option value="' + player.id + '">' + player.name + '</option>');
          }
          selected_player_list = [];
          return $("#playerselect").show();
        });
      }
    };
    choose_player = function() {
      if ($("#playerselect option:selected").val() !== "None") {
        selected_player_list.push($("#playerselect option:selected").val());
        $("img.loading").show();
        $("#heatmapdiv").html($("img.loading"));
        return update_heatmap_img();
      }
    };
    update_heatmap_img = function() {
      return $.get("gen_heatmap_img", {
        "player_id": selected_player_list,
        "sd": sd
      }, function(data) {
        $("img.loading").hide();
        return $('#heatmapdiv').append(data);
      });
    };
    $("#teamselect").change(function() {
      return get_players();
    });
    return $("#playerselect").change(function() {
      return choose_player();
    });
  });

}).call(this);
